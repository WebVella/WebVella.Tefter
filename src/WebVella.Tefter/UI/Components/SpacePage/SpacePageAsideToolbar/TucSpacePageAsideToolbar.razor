@namespace WebVella.Tefter.UI.Components
@inherits TfBaseComponent
<TucErrorBoundry>
	<div class="tf-sidetoolbar">
		<div class="tf-sidetoolbar__search">
			<FluentStack HorizontalGap="0">
				<FluentButton Title="pages"
							  OnClick="@(()=>_setActiveTab(TfSpaceNavigationActiveTab.Pages))"
							  Appearance="@(_activeTab == TfSpaceNavigationActiveTab.Pages ? Appearance.Accent : Appearance.Outline)"
							  IconStart="@TfConstants.GetIcon("TextBulletListTree")" />
				<FluentButton Title="saved URLs"
							  OnClick="@(()=>_setActiveTab(TfSpaceNavigationActiveTab.Saves))"
							  Appearance="@(_activeTab == TfSpaceNavigationActiveTab.Saves ? Appearance.Accent : Appearance.Outline)"
							  IconStart="@TfConstants.GetIcon("Link")" />
				<FluentSearch Class="search" Placeholder="@LOC("search...")" Immediate="true" ImmediateDelay="700" Value=@_search
							  ValueChanged="onSearch" AutoComplete="off">
				</FluentSearch>
			</FluentStack>
		</div>
		@if (TfState.User.IsAdmin)
		{
			<div class="tf-sidetoolbar__actions">
				<FluentButton Title="More actions"
							  Id="tf-sidetoolbar-actions-btn"
							  OnClick="@(_=> _actionMenuOpened = true)"
							  Appearance="Appearance.Outline"
							  IconStart="@TfConstants.GetIcon("MoreVertical")" />
				<FluentMenu UseMenuService="true"
							HorizontalPosition="@HorizontalPosition.Start"
							@bind-Open="_actionMenuOpened"
							Anchor="tf-sidetoolbar-actions-btn">
					<FluentMenuItem OnClick="_addPageAsync">
						<FluentIcon Value="@TfConstants.GetIcon("DocumentAdd")" Slot="start" />
						<FluentLabel>@LOC("New page")</FluentLabel>
					</FluentMenuItem>
					<FluentMenuItem OnClick="_managePagesAsync">
						<FluentIcon Value="@TfConstants.GetIcon("DocumentFolder")" Slot="start" />
						<FluentLabel>@LOC("Manage Pages")</FluentLabel>
					</FluentMenuItem>
					<FluentDivider />
					<FluentMenuItem OnClick="_editSpaceAsync">
						<FluentIcon Value="@TfConstants.GetIcon("Edit")" Slot="start" />
						<FluentLabel>@LOC("Edit Space")</FluentLabel>
					</FluentMenuItem>
					<FluentMenuItem OnClick="_editSpaceAccessAsync">
						<FluentIcon Value="@TfConstants.GetIcon("Key")" Slot="start" />
						<FluentLabel>@LOC("Space Access")</FluentLabel>
					</FluentMenuItem>
					<FluentMenuItem OnClick="_deleteSpaceAsync">
						<FluentIcon Value="@TfConstants.GetIcon("Delete")!.WithColor(Color.Error)" Slot="start" />
						<FluentLabel>@LOC("Delete Space")</FluentLabel>
					</FluentMenuItem>
				</FluentMenu>
			</div>
		}
	</div>

</TucErrorBoundry>