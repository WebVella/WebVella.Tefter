@namespace WebVella.Tefter.UI.Components
@inherits TfBaseComponent


<TucScreenRegionComponent RegionContext="@(new TfSpaceViewToolBarActionScreenRegionContext())" />
@if (SpaceView.Settings.CanCreateRows)
{
	<FluentButton OnClick="_onAddRowClick" Appearance="@Appearance.Outline">
		<FluentIcon Value="@TfConstants.GetIcon("Add")" Color="@Color.Accent" />
	</FluentButton>
}
@if (SpaceView.Settings.CanUpdateRows)
{
	@if (TucSpaceViewPageContent.GetEditAll())
	{
		<FluentButton OnClick="_onEditAllClick" BackgroundColor="var(--warning)" Color="transparent">
			<FluentIcon Value="@TfConstants.GetIcon("Edit")!.WithColor("white")" />
		</FluentButton>
	}
	else
	{
		<FluentButton OnClick="_onEditAllClick" Appearance="@Appearance.Outline">
			<FluentIcon Value="@TfConstants.GetIcon("Edit")" Color="@Color.Accent" />
		</FluentButton>
	}
}
<FluentButton Id="view-action-selector" OnClick="OnActionClick" Appearance="@Appearance.Outline">
	<FluentIcon Value="@TfConstants.GetIcon("Connector")" Color="@Color.Accent" />
</FluentButton>
@if (_activeBookmark is not null)
{
	<FluentButton Id="view-bookmark-selector" OnClick="OnBookmarkClick" Appearance="@Appearance.Outline">
		<FluentIcon Value="@TfConstants.GetIcon("Bookmark")" Color="@Color.Accent" />
	</FluentButton>
}
@if (_activeSavedUrl is not null)
{
	@if (Navigator.IsSpaceViewSavedUrlChanged(_activeSavedUrl.Url))
	{
		<FluentButton Id="view-save-selector" OnClick="OnSaveLinkClick" Appearance="@Appearance.Outline">
			<FluentIcon Value="@TfConstants.GetIcon("Link")" Color="@Color.Warning" />
		</FluentButton>
	}
	else
	{
		<FluentButton Id="view-save-selector" OnClick="OnSaveLinkClick" Appearance="@Appearance.Outline">
			<FluentIcon Value="@TfConstants.GetIcon("Link")" Color="@Color.Accent" />
		</FluentButton>
	}
}
<FluentButton Id="view-export-selector" OnClick="OnExportClick" Appearance="@Appearance.Outline">
	<FluentIcon Value="@TfConstants.GetIcon("ShareAndroid")" Color="@Color.Accent" />
</FluentButton>
@if (Context.CurrentUser.IsAdmin)
{
	<FluentAnchor Href="@string.Format(TfConstants.SpaceViewPageUrl, Context.SpacePage.SpaceId, SpaceView.Id)" Appearance="@Appearance.Outline"
				  AdditionalAttributes="@_settingsAttributes" Class="tf-button">
		<FluentIcon Value="@TfConstants.GetIcon("Settings")" Color="@Color.Accent" />
	</FluentAnchor>
}

@* <TucSpaceViewPropertiesSelector @ref="_propertiesSelector" />  *@
<TucSpaceViewActionSelector @ref="_actionSelector" SpaceView="SpaceView" SpaceData="SpaceData" User=Context.CurrentUser Data="Data" SelectedRows="SelectedRows" />
<TucSpaceViewShareSelector @ref="_shareSelector" SpaceView="SpaceView" Data="Data" SelectedRows="SelectedRows" ActiveBookmark="_activeBookmark" ActiveSavedUrl="_activeSavedUrl" />
<TucSpaceViewBookmarkSelector @ref="_bookmarkSelector" SpaceView="SpaceView" Data="Data" SelectedRows="SelectedRows" ActiveBookmark="_activeBookmark" ActiveSavedUrl="_activeSavedUrl" />
<TucSpaceViewLinkSaveSelector @ref="_saveSelector" SpaceView="SpaceView" Data="Data" SelectedRows="SelectedRows" ActiveBookmark="_activeBookmark" ActiveSavedUrl="_activeSavedUrl" />
