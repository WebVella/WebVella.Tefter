@namespace WebVella.Tefter.UI.Components
@inherits TfBaseComponent
<TucLayoutPageContent Title="@LOC("Templates")" Icon="CalendarTemplate">
    <Toolbar>
        <FluentButton OnClick="_onAddClick" Appearance="@Appearance.Outline" IconStart="@TfConstants.GetIcon("Add")">
            @LOC("New Template")
        </FluentButton>
        <TucPageSearch/>
        @foreach (var type in Enum.GetValues<TfTemplateResultType>())
        {
            <FluentButton OnClick="@(()=>_toggleType(type))" Appearance="@Appearance.Outline" 
                          Title="@type.ToDescriptionString()"
                          IconStart="@TfConstants.GetIcon(type.GetFluentIcon())!.WithColor(_toggledTypes.Contains(type) ? Color.Accent : Color.Disabled)"/>
        }
    </Toolbar>
    <ChildContent>
        <table class="tf-grid">
            <colgroup>
                <col style="width: 20px;min-width: 20px">
                <col style="width: 160px;min-width: 160px"/>
                <col/>
            </colgroup>
            <thead>
            <tr class="tf-grid-thead-bkg"></tr>
            @if (_isLoading)
            {
                <tr class="tf-grid-thead-loading"></tr>
            }
            <tr>
                <th></th>
                <th>@LOC("type")</th>
                <th>@LOC("name")</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var item in _items)
            {
                <tr>
                    <td>
                        <div class="tf-grid-td-hover"></div>
                        <div>
                            <TucAnchor Appearance="@Appearance.Outline" IconStart="@TfConstants.GetIcon("Eye")"
                                       Href="@String.Format(TfConstants.AdminTemplateDetailsPageUrl, item.Id).GenerateWithLocalAndQueryAsReturnUrl(TfAuthLayout.GetState().NavigationState.Uri)"/>
                        </div>
                    </td>
                    <td>
                        <div class="tf-grid-td-hover"></div>
                        <div>
                            <FluentStack VerticalAlignment="VerticalAlignment.Center">
                                <FluentIcon Value="@TfConstants.GetIcon(item.ResultType.GetFluentIcon())"></FluentIcon>
                                <div>@item.ResultType.ToDescriptionString()</div>
                            </FluentStack>
                            
                        </div>
                    </td>
                    <td>
                        <div class="tf-grid-td-hover"></div>
                        <div>
                            @item.Name
                        </div>
                    </td>                    
                </tr>
            }
            @if (_items.Count == 0)
            {
                <tr>
                    <td colspan="2">
                        <div class="tf-grid-td-hover"></div>
                        <div>@LOC("no items")</div>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    </ChildContent>
</TucLayoutPageContent>