@namespace WebVella.Tefter.UI.Addons
@inherits TfLocalizedViewColumnComponent

<FluentGrid>
	<FluentGridItem xs="12">
		<FluentTextField Label="@LOC("Confirmation message")"
		                 Value="@_form.ChangeConfirmationMessage" Style="width:100%"
		                 ValueChanged=@((x) => _onSettingsChangedAsync(nameof(_form.ChangeConfirmationMessage), x))
		                 Placeholder="@LOC("empty for no confirmation")"/>
		<TucValidationMessage Field="@(nameof(_form.ChangeConfirmationMessage))" Errors="Context.ValidationErrors"/>
	</FluentGridItem>
</FluentGrid>
<FluentGrid>
	<FluentGridItem xs="12">
		<FluentTextField Label="@LOC("Not selected text")"
		                 Value="@_form.NotSelectedString" Style="width:100%"
		                 ValueChanged=@((x) => _onSettingsChangedAsync(nameof(_form.NotSelectedString), x))
		                 Placeholder="@LOC("empty for no confirmation")"/>
		<TucValidationMessage Field="@(nameof(_form.NotSelectedString))" Errors="Context.ValidationErrors"/>
	</FluentGridItem>
</FluentGrid>
<FluentDivider Style="margin:1rem 0"/>
<FluentGrid>
	<FluentGridItem xs="12">
		<FluentInputLabel Label="@LOC("Options source type")"/>
		<FluentRadioGroup Name="source" Value=@_form.Source
		                  ValueChanged="@((x) => _onSettingsChangedAsync(nameof(_form.Source), x))"
		                  TValue="TfSelectViewColumnTypeSettingsSourceType">
			<FluentRadio Value="@TfSelectViewColumnTypeSettingsSourceType.ManuallySet">
				@TfSelectViewColumnTypeSettingsSourceType.ManuallySet.ToDescriptionString()
			</FluentRadio>
			<FluentRadio Value="@TfSelectViewColumnTypeSettingsSourceType.SpaceData">
				@TfSelectViewColumnTypeSettingsSourceType.SpaceData.ToDescriptionString()
			</FluentRadio>
		</FluentRadioGroup>
	</FluentGridItem>
</FluentGrid>
@if (_form.Source == TfSelectViewColumnTypeSettingsSourceType.ManuallySet)
{
	<FluentGrid>
		<FluentGridItem xs="12">
			<FluentTextArea Label="@LOC("Options")" Resize="@TextAreaResize.Vertical"
			                Value="@_form.OptionsString" Style="width:100%;" Rows="7"
			                ValueChanged=@((x) => _onSettingsChangedAsync(nameof(_form.OptionsString), x))/>
			<TucValidationMessage Field="@(nameof(_form.OptionsString))" Errors="Context.ValidationErrors"/>
			<div class="tf-input-description">
				@((MarkupString)LOC(@"Options separated by new line. Each option supports comma separated settings:
		<br/>*value - required, text, converted automatically to column data type
		<br/>*label - text
		<br/>*iconName - text,fluent icon name
		<br/>*color - string or int. String is css color value, named color or TfColor value as string. Int is converted to enum of TfColor
		<br/>*backgroundColor - string or int. String is css color value, named color or TfColor value as string. Int is converted to enum of TfColor
		<br/>*hideLabel - text, converted to boolean"))
			</div>
		</FluentGridItem>
	</FluentGrid>
}
else if (_form.Source == TfSelectViewColumnTypeSettingsSourceType.SpaceData)
{
	<FluentGrid>
		<FluentGridItem xs="6">
			<TucSelect TOption="TfDataset?"
			           SelectedOption="@SelectedDataset"
			           SelectedOptionChanged="@((x) => _datasetChangedAsync(x))"
			           OptionValue="((x)=> x?.Id.ToString())"
			           OptionText="((x)=> x?.Name)" Items="@DatasetOptions"/>
			<TucValidationMessage Field="@(nameof(_form.DatasetId))" Errors="Context.ValidationErrors"/>
		</FluentGridItem>
		<FluentGridItem xs="6">
			@SelectedDataset?.Name
		</FluentGridItem>
	</FluentGrid>
	<FluentGrid>
		<FluentGridItem xs="6">
			<FluentTextField Label="@LOC("Value column name")"
			                 Value="@_form.SpaceDataValueColumnName" Style="width:100%;"
			                 ValueChanged=@((x) => _onSettingsChangedAsync(nameof(_form.SpaceDataValueColumnName), x))/>
			<div class="tf-input-description">@LOC("any column data")</div>
			<TucValidationMessage Field="@(nameof(_form.SpaceDataValueColumnName))" Errors="Context.ValidationErrors"/>
		</FluentGridItem>
		<FluentGridItem xs="6">
			<FluentTextField Label="@LOC("Label column name")"
			                 Value="@_form.SpaceDataLabelColumnName" Style="width:100%;"
			                 ValueChanged=@((x) => _onSettingsChangedAsync(nameof(_form.SpaceDataLabelColumnName), x))/>
			<div class="tf-input-description">@LOC("column data string or object that will be case to string")</div>
			<TucValidationMessage Field="@(nameof(_form.SpaceDataLabelColumnName))" Errors="Context.ValidationErrors"/>
		</FluentGridItem>
	</FluentGrid>
	<FluentGrid>
		<FluentGridItem xs="6">
			<FluentTextField Label="@LOC("Color column name")"
			                 Value="@_form.SpaceDataColorColumnName" Style="width:100%;"
			                 ValueChanged=@((x) => _onSettingsChangedAsync(nameof(_form.SpaceDataColorColumnName), x))/>
			<div
				class="tf-input-description">@LOC("column data string or int. String is css color value. Int is converted to enum of TfColor")</div>
			<TucValidationMessage Field="@(nameof(_form.SpaceDataColorColumnName))" Errors="Context.ValidationErrors"/>
		</FluentGridItem>
		<FluentGridItem xs="6">
			<FluentTextField Label="@LOC("Background color column name")"
			                 Value="@_form.SpaceDataBackgroundColorColumnName" Style="width:100%;"
			                 ValueChanged=@((x) => _onSettingsChangedAsync(nameof(_form.SpaceDataBackgroundColorColumnName), x))/>
			<div
				class="tf-input-description">@LOC("column datastring or int. String is css color value. Int is converted to enum of TfColor")</div>
			<TucValidationMessage Field="@(nameof(_form.SpaceDataBackgroundColorColumnName))" Errors="Context.ValidationErrors"/>
		</FluentGridItem>
	</FluentGrid>
	<FluentGrid>
		<FluentGridItem xs="6">
			<FluentTextField Label="@LOC("Icon column name")"
			                 Value="@_form.SpaceDataIconColumnName" Style="width:100%;"
			                 ValueChanged=@((x) => _onSettingsChangedAsync(nameof(_form.SpaceDataIconColumnName), x))/>
			<div class="tf-input-description">@LOC("column datastring, fluent icon name")</div>
			<TucValidationMessage Field="@(nameof(_form.SpaceDataIconColumnName))" Errors="Context.ValidationErrors"/>
		</FluentGridItem>
		<FluentGridItem xs="6"></FluentGridItem>
	</FluentGrid>
}
