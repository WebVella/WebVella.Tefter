@using Microsoft.FluentUI.AspNetCore.Components.Extensions
@namespace WebVella.Tefter.Web.Components
@inherits TfFormBaseComponent
@if (!string.IsNullOrWhiteSpace(_error))
{
	<FluentMessageBar Intent="@MessageIntent.Error" AllowDismiss="false">@_error</FluentMessageBar>

}
else
{
	<TfCard>
		<FluentGrid>
			<FluentGridItem xs="6">
				<FluentTextField TextFieldType="@TextFieldType.Text" Value=@TfAppState.Value.SpaceData.Name
								 Label="@LOC("Name")" Style="width:100%" ReadOnly="true" />

			</FluentGridItem>
			<FluentGridItem xs="6">
				<FluentInputLabel Label="@LOC("Data provider")" />
				<FluentStack>
					<FluentTextField TextFieldType="@TextFieldType.Text" Value=@SelectedProvider.Name
									 Style="width:100%" ReadOnly="true" />
					@if (TfUserState.Value.CurrentUser.IsAdmin)
					{
						<FluentAnchor Style="flex:0 0 40px" Appearance="@Appearance.Outline" title="@LOC("open view")"
									  Href="@(String.Format(TfConstants.AdminDataProviderDetailsPageUrl,SelectedProvider.Id))"
									  IconStart="@TfConstants.ViewIcon" Target="_blank" />
					}
				</FluentStack>
			</FluentGridItem>
		</FluentGrid>
	</TfCard>
	<FluentTabs ActiveTabId="@_activeTab" Class="tf-tabs">
		<FluentTab Id="columns">
			<Header>@LOC("Columns")</Header>
			<Content>
				<TfColumnCard DataProvider="SelectedProvider" Items="_form.Columns" ItemsChanged="_onColumnsChanged" />
			</Content>
		</FluentTab>
		<FluentTab Id="filters">
			<Header>@LOC("Query Filters")</Header>
			<Content>
				<TfFilterCard DataProvider="SelectedProvider" Items="_form.Filters" ItemsChanged="_onFiltersChanged" />
			</Content>
		</FluentTab>
		<FluentTab Id="sorts">
			<Header>@LOC("Default Sort")</Header>
			<Content>
				<TfSortCard DataProvider="SelectedProvider" Items="_form.SortOrders" ItemsChanged="_onSortChanged" />
			</Content>
		</FluentTab>
	</FluentTabs>

}

