@namespace WebVella.Tefter.Web.Components
@inherits TfBaseComponent
@if (TfUserState.Value.SidebarExpanded)
{
	<style>
		.sidebar-nav {
			--tf-space-color: @TfAppState.Value.SpaceColorString;
			--tf-space-icon-color: @TfAppState.Value.SpaceIconColorString;
			--tf-space-border-color: @TfAppState.Value.SpaceBorderColor;
		}
	</style>
	<FluentStack Orientation="Orientation.Vertical" Class="sidebar with-toolbar" Style="@TfAppState.Value.SpaceSidebarStyle">
		<div class="@($"sidebar-nav {(TfUserState.Value.SidebarExpanded ? "expanded" : "collapsed")}")">
			<div class="sidebar-toolbar">
				<div class="sidebar-toolbar-mode">
					<FluentToolbar Class="modebar">
						<FluentButton Class="@($"btn views {_getTabActiveClass(TfSpaceNavigationActiveTab.Nodes)}")" Title="views"
									  OnClick="@(()=>_setActiveTab(TfSpaceNavigationActiveTab.Nodes))"
									  Appearance="Appearance.Outline">
							<FluentIcon Value="@TfConstants.SpaceViewIcon" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
						</FluentButton>
@* 						<FluentButton Class="@($"btn bookmarks {_getTabActiveClass(TfSpaceNavigationActiveTab.Bookmarks)}")" Title="bookmarks"
									  OnClick="@(()=>_setActiveTab(TfSpaceNavigationActiveTab.Bookmarks))"
									  Appearance="Appearance.Outline">
							<FluentIcon Value="@TfConstants.BookmarkOFFIcon" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
						</FluentButton> *@
						<FluentButton Class="@($"btn saves {_getTabActiveClass(TfSpaceNavigationActiveTab.Saves)}")" Title="saved URLs"
									  OnClick="@(()=>_setActiveTab(TfSpaceNavigationActiveTab.Saves))"
									  Appearance="Appearance.Outline">
							<FluentIcon Value="@TfConstants.GetIcon("Link")" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
						</FluentButton>
					</FluentToolbar>
				</div>
				<div class="sidebar-toolbar-search">
					<FluentTextField Class="search" Placeholder="@LOC("search...")" Immediate="true" ImmediateDelay="500" 
						Value=@search ValueChanged="onSearch" />
				</div>
				<div class="sidebar-toolbar-actions">
					<FluentButton Id="space-settings" Title="space actions"
								  OnClick="_onSettingsClick" Appearance="@Appearance.Outline">
						<FluentIcon Value="@TfConstants.GetIcon("Settings")" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
					</FluentButton>
					<FluentMenu Anchor="space-settings" @bind-Open="_settingsMenuVisible" Width="200px" UseMenuService="false">
						<FluentMenuItem OnClick="onManageSpaceClick">
							@LOC("Manage Space")
							<FluentIcon Value="@TfConstants.EditIcon" Slot="start" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
						</FluentMenuItem>
						<FluentMenuItem OnClick="onDeleteSpaceClick">
							@LOC("Delete Space")
							<FluentIcon Value="@TfConstants.DeleteIcon" Slot="start" Color="@Color.Error" />
						</FluentMenuItem>
						<FluentDivider></FluentDivider>
						<FluentMenuItem OnClick="onDataListClick">
							@LOC("Space Data")
							<FluentIcon Value="@TfConstants.SpaceDataIcon" Slot="start" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
						</FluentMenuItem>
						<FluentMenuItem OnClick="onViewListClick">
							@LOC("Space Views")
							<FluentIcon Value="@TfConstants.SpaceViewIcon" Slot="start" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
						</FluentMenuItem>
						<FluentMenuItem OnClick="onPageListClick">
							@LOC("Space Pages")
							<FluentIcon Value="@TfConstants.PageIcon" Slot="start" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
						</FluentMenuItem>
					</FluentMenu>
				</div>
			</div>
			<div class="sidebar-inner">
				<TfTreeView Items="_menu" />
			</div>
		</div>
	</FluentStack>
}


