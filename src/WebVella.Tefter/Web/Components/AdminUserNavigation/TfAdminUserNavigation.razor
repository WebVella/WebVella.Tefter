@namespace WebVella.Tefter.Web.Components
@inherits TfBaseComponent

<div class="@($"sidebar-nav {(ScreenStateSidebarExpanded.Value ? "expanded" : "collapsed")}")">
	<div class="sidebar-toolbar">
		<div class="sidebar-toolbar-search">
			<FluentTextField Class="search" Placeholder="@LOC("search...")" Immediate="true" ImmediateDelay="500" Value=@UC.MenuSearch
				ValueChanged="onSearch"/>
		</div>
		<div class="sidebar-toolbar-actions">
			<FluentButton Title="@LOC("Create new user")"
						  IconStart="@TfConstants.AddIcon"
						  OnClick="onAddClick" Appearance="@Appearance.Outline">@LOC("New")</FluentButton>
		</div>
	</div>
	<div class="sidebar-inner">
		@if (UC.MenuLoading)
		{
			<TfLoadingPane ShowTop="true" />
		}
		else
		{
			<FluentNavMenu Style="width:100%">
				@foreach (var item in UC.MenuItems)
				{
					<FluentNavLink Href="@item.Url" Match="@item.Match" Data="item" Id="@item.Id"
								   Icon="item.Icon" IconColor="@Color.Neutral">@item.Title</FluentNavLink>
				}
			</FluentNavMenu>
			@if (UC.MenuHasMore)
			{
				<FluentButton Class="load-more" Appearance="@Appearance.Outline" OnClick="loadMoreClick">@LOC("Load more")</FluentButton>
			}
			@if (UC.MenuItems.Count == 0)
			{
				<FluentMessageBar AllowDismiss="false" Intent="@MessageIntent.Info">@LOC("No users match search criteria")</FluentMessageBar>
			}
		}
	</div>
</div>

