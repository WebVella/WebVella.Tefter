@namespace WebVella.Tefter.Web.Components
@inherits TfBaseComponent
<style>
	.sidebar-nav {
		--tf-space-color: @TfAppState.Value.SpaceColorString;
		--tf-space-icon-color: @TfAppState.Value.SpaceIconColorString;
		--tf-space-border-color: @TfAppState.Value.SpaceBorderColor;
	}
</style>
<div class="@($"sidebar-nav {(TfUserState.Value.SidebarExpanded ? "expanded" : "collapsed")}")">
	<div class="sidebar-toolbar">
		<div class="sidebar-toolbar-search">
			<FluentTextField Class="search" Placeholder="@LOC("search...")" Immediate="true" ImmediateDelay="500" Value=@search ValueChanged="onSearch" />
		</div>
		<div class="sidebar-toolbar-actions">
			<FluentButton Id="space-settings" Title="space actions"
						  OnClick="() => _settingsMenuVisible = !_settingsMenuVisible" Appearance="@Appearance.Outline">
				<FluentIcon Value="@TfConstants.GetIcon("Settings")" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
			</FluentButton>
			<FluentMenu Anchor="space-settings" @bind-Open="_settingsMenuVisible" Width="200px" UseMenuService="false">
				<FluentMenuItem OnClick="onManageSpaceClick">
					@LOC("Manage Space")
					<FluentIcon Value="@TfConstants.EditIcon" Slot="start" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
				</FluentMenuItem>
				<FluentMenuItem OnClick="onDeleteSpaceClick">
					@LOC("Delete Space")
					<FluentIcon Value="@TfConstants.DeleteIcon" Slot="start" Color="@Color.Error" />
				</FluentMenuItem>
				<FluentDivider></FluentDivider>
				<FluentMenuItem OnClick="onAddClick">
					@LOC("Create View")
					<FluentIcon Value="@TfConstants.AddIcon" Slot="start" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
				</FluentMenuItem>
				<FluentDivider></FluentDivider>
				<FluentMenuItem OnClick="onDataListClick">
					@LOC("Space Data")
					<FluentIcon Value="@TfConstants.SpaceDataIcon" Slot="start" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
				</FluentMenuItem>
				<FluentMenuItem OnClick="onViewListClick">
					@LOC("Space Views")
					<FluentIcon Value="@TfConstants.SpaceViewIcon" Slot="start" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
				</FluentMenuItem>
				<FluentMenuItem OnClick="onPageListClick">
					@LOC("Space Pages")
					<FluentIcon Value="@TfConstants.PageIcon" Slot="start" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
				</FluentMenuItem>
			</FluentMenu>
		</div>
	</div>
	<div class="sidebar-inner">
		@{
			var menuItems = _getMenu();
		}
		<TfTreeView Items="menuItems" />
		@if (menuItems.Count == 0)
		{
			<div style="padding-left:5px;padding-top:5px">@LOC("No views found in the space")</div>
			<FluentButton Appearance="@Appearance.Outline" OnClick="onAddClick" Style="margin-top:1rem;">
				<FluentIcon Slot="start" Value="@TfConstants.AddIcon" Color="@Color.Custom" CustomColor="@TfAppState.Value.SpaceIconColorString" />
				@LOC("Create View")
			</FluentButton>
		}
	</div>
</div>

