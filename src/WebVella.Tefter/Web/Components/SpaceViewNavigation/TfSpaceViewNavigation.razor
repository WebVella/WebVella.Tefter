@inherits TfBaseComponent

<div class="@($"sidebar-nav {(ScreenStateSidebarExpanded.Value ? "expanded" : "collapsed")}")">
	<div class="sidebar-toolbar">
		<div class="sidebar-toolbar-mode">
			<FluentToolbar Class="modebar">
				<FluentButton Class="btn tree active" Title="show tree" BackgroundColor="@SpaceState.Value.SpaceColorString"
							  Style="@($"border-color:{SpaceState.Value.SpaceBorderColor} !important")">
					<FluentIcon Value="@TfConstants.GetIcon("AppsList")" />
				</FluentButton>
				<FluentButton Class="btn bookmark" Title="show bookmarked" Appearance="@Appearance.Outline">
					<FluentIcon Value="@TfConstants.BookmarkOFFIcon" Color="@Color.Custom" CustomColor="@SpaceState.Value.SpaceIconColorString" />
				</FluentButton>
				<FluentButton Class="btn save" Title="show saved" Appearance="@Appearance.Outline">
					<FluentIcon Value="@TfConstants.SaveIcon" Color="@Color.Custom" CustomColor="@SpaceState.Value.SpaceIconColorString" />
				</FluentButton>
			</FluentToolbar>
		</div>
		<div class="sidebar-toolbar-search">
			<FluentTextField Class="search" Placeholder="@LOC("search...")" Immediate="true" ImmediateDelay="500" Value=@search ValueChanged="onSearch" />
		</div>
		<div class="sidebar-toolbar-actions">
			<FluentButton Id="space-settings" Title="space actions"
						  OnClick="() => _settingsMenuVisible = !_settingsMenuVisible" Appearance="@Appearance.Outline">
				<FluentIcon Value="@TfConstants.GetIcon("Settings")" Color="@Color.Custom" CustomColor="@SpaceState.Value.SpaceIconColorString" />
			</FluentButton>
			<FluentMenu Anchor="space-settings" @bind-Open="_settingsMenuVisible" Width="200px">
				<FluentMenuItem OnClick="onManageSpaceClick">
					@LOC("Manage Space")
					<FluentIcon Value="@TfConstants.EditIcon" Slot="start" Color="@Color.Custom" CustomColor="@SpaceState.Value.SpaceIconColorString" />
				</FluentMenuItem>
				<FluentMenuItem OnClick="onDataListClick">
					@LOC("Data List")
					<FluentIcon Value="@TfConstants.SpaceDataIcon" Slot="start" Color="@Color.Custom" CustomColor="@SpaceState.Value.SpaceIconColorString" />
				</FluentMenuItem>
				<FluentDivider></FluentDivider>
				<FluentMenuItem OnClick="onAddClick">
					@LOC("Create View")
					<FluentIcon Value="@TfConstants.AddIcon" Slot="start" Color="@Color.Custom" CustomColor="@SpaceState.Value.SpaceIconColorString" />
				</FluentMenuItem>

			</FluentMenu>
		</div>
	</div>
	<div class="sidebar-inner">
		@if (_menuLoading)
		{
			<TfLoadingPane />
		}
		else
		{
			<FluentTreeView>
				@foreach (var item in _visibleMenuItems)
				{
					<FluentTreeItem Class="@item.LevelClass" Text="@item.Title" Selected="@item.Active" SelectedChanged="@item.OnSelect"
									Data="item" Id="@item.Id" InitiallySelected="@item.Active">
						<FluentIcon Value="@item.Icon" Slot="start" Color="@Color.Custom" CustomColor="@SpaceState.Value.SpaceIconColorString" />
					</FluentTreeItem>
				}
			</FluentTreeView>
			@if (hasMore)
			{
				<FluentButton Class="load-more" Appearance="@Appearance.Outline" OnClick="loadMoreClick">Load more</FluentButton>
			}
		}
	</div>
</div>

