@namespace WebVella.Tefter.Web.Components
@inherits TfBaseComponent

<div class="@($"sidebar-nav {(TfUserState.Value.SidebarExpanded ? "expanded" : "collapsed")}")">
	<div class="sidebar-toolbar">
		<div class="sidebar-toolbar-search">
			<FluentTextField Class="search" Placeholder="@LOC("search...")" Immediate="true" ImmediateDelay="500" Value=@_search
							 ValueChanged="onSearch" />
		</div>
		<div class="sidebar-toolbar-actions">
			<FluentButton Title="@LOC("Create new data provider")"
						  IconStart="@TfConstants.AddIcon"
						  OnClick="onAddClick" Appearance="@Appearance.Outline">@LOC("New")</FluentButton>
		</div>
	</div>
	<div class="sidebar-inner">

		<FluentNavMenu Style="width:100%">
			@foreach (var item in TfAppState.Value.AdminDataProviders)
			{
				<FluentNavLink Href="@(string.Format(TfConstants.AdminDataProviderDetailsPageUrl,item.Id))" Match="@NavLinkMatch.Prefix"
							   @key="@item.Id" Icon="@TfConstants.AdminDataProvidersIcon" IconColor="@Color.Neutral">
					@RenderUtils.StringOverflow(item.Name, _stringLimit)
				</FluentNavLink>
			}
		</FluentNavMenu>
		@if (!_endIsReached)
		{
			<FluentButton Class="load-more" Appearance="@Appearance.Outline" OnClick="@(() => loadMoreClick())" Loading="_isLoading">@LOC("Load more")</FluentButton>
		}
		@if (TfAppState.Value.AdminDataProviders.Count == 0)
		{
			<FluentMessageBar AllowDismiss="false" Intent="@MessageIntent.Info">@LOC("No data providers match search criteria")</FluentMessageBar>
		}


	</div>
</div>

