@using WebVella.Tefter.Web.Components
@namespace WebVella.Tefter.TemplateProcessors.TextFile.Components
@inherits TfFormBaseComponent
@if (DisplayMode == TfComponentMode.Create || DisplayMode == TfComponentMode.Update)
{
	<FluentEditForm EditContext="EditContext" FormName="dp-settings" class="tf-form" novalidate>
		<FluentGrid>
			<FluentGridItem xs="12">
				<FluentInputLabel Label="@LOC("Template File")" />
				<TfFileField Value=@_downloadUrl Uploaded="_fileChanged" IsLoading="_fileLoading" Accept=".txt,.csv" />
				<FluentValidationMessage For="@(() => _form.FileName)" />
			</FluentGridItem>
		</FluentGrid>
		<FluentGrid>
			<FluentGridItem xs="12">
				<FluentInputLabel Label="@LOC("Group by columns")" />
				<FluentStack>
					<TfSelectList @bind-Values=@_form.GroupBy @bind-Values:after=_valueChanged Placeholder="@LOC("type a column name + ENTER")"
								  NoItemsMessage="@LOC("no data grouping will be applied")" />
				</FluentStack>
				<FluentValidationMessage For="@(() => _form.GroupBy)" />
			</FluentGridItem>
		</FluentGrid>
	</FluentEditForm>
}
else
{
	<FluentGrid>
		<FluentGridItem xs="6">
			<FluentInputLabel Label="@LOC("Template File")" />
			<TfFileField Value=@_downloadUrl />
		</FluentGridItem>
		<FluentGridItem xs="6">
			<FluentInputLabel Label="@LOC("Group by columns")" />
			<TfSelectList Values=@_form.GroupBy NoItemsMessage="@LOC("no data grouping will be applied")" />
		</FluentGridItem>
	</FluentGrid>
}