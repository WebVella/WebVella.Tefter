@using WebVella.Tefter.Web.Components
@namespace WebVella.Tefter.TemplateProcessors.TextContent.Components
@inherits TfFormBaseComponent
@if (DisplayMode == TfComponentMode.Create || DisplayMode == TfComponentMode.Update)
{
	<FluentEditForm EditContext="EditContext" FormName="dp-settings" class="tf-form" novalidate>
		<FluentGrid>
			<FluentGridItem xs="12">
				<FluentInputLabel Label="@LOC("Content type")" />
				<FluentRadioGroup Name="content-type" @bind-Value=_form.IsHtml @bind-Value:after=_valueChanged>
					<FluentRadio Value="false">plain text</FluentRadio>
					<FluentRadio Value="true">HTML text</FluentRadio>
				</FluentRadioGroup>
				<FluentValidationMessage For="@(() => _form.IsHtml)" />
			</FluentGridItem>
		</FluentGrid>
		<FluentGrid>
			<FluentGridItem xs="12">
				<FluentInputLabel Label="@LOC("Content")" />
				@if (_form.IsHtml)
				{
					<TfEditor @bind-Value=@_form.Content @bind-Value:after=_valueChanged Size="TfEditorSize.Large" />
				}
				else
				{
					<FluentTextArea @bind-Value=@_form.Content @bind-Value:after=_valueChanged Style="width:100%" Rows="7"/>
				}
				<FluentValidationMessage For="@(() => _form.Content)" />
			</FluentGridItem>
		</FluentGrid>
		<FluentGrid>
			<FluentGridItem xs="12">
				<FluentInputLabel Label="@LOC("Group by columns")" />
				<FluentStack>
					<TfSelectList @bind-Values=@_form.GroupBy @bind-Values:after=_valueChanged Placeholder="@LOC("type a column name + ENTER")"
					NoItemsMessage="@LOC("no data grouping will be applied")" />
				</FluentStack>
				<FluentValidationMessage For="@(() => _form.GroupBy)" />
			</FluentGridItem>
		</FluentGrid>
	</FluentEditForm>
}
else
{
	<FluentGrid>
		<FluentGridItem xs="12">
			<FluentInputLabel Label="@LOC("Content type")" />
			@if (_form.IsHtml) {
				<div><FluentBadge Appearance="Appearance.Accent">HTML</FluentBadge></div>
			}
			else{
				<div><FluentBadge Appearance="Appearance.Neutral">Text</FluentBadge></div>
			}
		</FluentGridItem>
	</FluentGrid>
	<FluentGrid>
		<FluentGridItem xs="12">
			<FluentInputLabel Label="@LOC("Content")" />
			@if (_form.IsHtml)
			{
				<TfEditor Value=@_form.Content Size="TfEditorSize.Large" ReadOnly="true" />
			}
			else
			{
				<FluentTextArea Value=@_form.Content ReadOnly="true" Style="width:100%" Rows="7" />
			}
		</FluentGridItem>
	</FluentGrid>
	<FluentGrid>
		<FluentGridItem xs="12">
			<FluentInputLabel Label="@LOC("Group by columns")" />
			<TfSelectList Values=@_form.GroupBy NoItemsMessage="@LOC("no data grouping will be applied")" />
		</FluentGridItem>
	</FluentGrid>
}